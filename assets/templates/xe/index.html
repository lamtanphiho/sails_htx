


<div class="row">
    <div class="col-lg-12">
        <h1 class="page-header">Quản lý xe</h1>
    </div>
    <!-- /.col-lg-12 -->
</div>
<!-- /.row -->
<div class="row">
    <div class="col-lg-12 ">
        <table id="tlb-field" >

            <tr>
                <td>
                    <b>Biển kiểm soát:</b>
                </td>
                <td style="padding-right: 20px">
                    <input style="float: right; width: 90%" class="form-control" type="text" value="" id="search-member-id">
                </td>

                <td>
                    <input ng-click="searchMember()"  style="    padding: 5px 10px;" class="form-control btn-success" type="button" value="Tìm" id="search-submit">

                </td>
                <td style="min-width:30px"></td>
                <td>
                        <a ui-sref="dashboard.xeadd" class="form-control btn btn-success">Thêm</a>
                </td>
                <td>
                  <button class="btn btn-link" ng-click="exportToExcel('#list-xe')" style="margin-left: 20px;">
                      <span class="glyphicon glyphicon-share"></span> Export to Excel
                  </button>
                </td>
            </tr>
        </table>
    </div>
    <div class="col-lg-12">
        <div class="panel panel-default">
            <div class="panel-heading" style="font-weight: bold;color: red;font-size: large;">
                Danh sách xe
            </div>
            <!-- /.panel-heading -->
            <div class="panel-body">
                <div class="dataTable_wrapper">
                   <table class="table table-striped table-bordered table-hover" id="list-xe">
                       <tr>
                           <th>Biển số</th>
                           <th>Hiệu xe</th>
                           <th>Loại xe</th>
                           <th>Trọng tải</th>
                           <th>Nước sx</th>
                           <th>Số khung</th>
                          
                           <th>Số máy</th>
                           <th>Chức năng</th>
                           <th>Chi tiết</th>

                       </tr>
                       <tr ng-repeat="x in xe">
                           <td>{{x.bien_so}}</td>
                           <td>{{x.hieu_xe}}</td>
                           <td>{{x.loai_xe}}</td>
                           <td>{{x.trong_tai}}</td>
                           <td>{{x.nuoc_sx}}</td>
                           <td>{{x.so_khung}}</td>
                           <td>{{x.so_may}}</td>
                           <td style="text-align: center" >
                               <button ng_click="show_km_hanh_trinh(x)" title="km hành trình" type="button" class="btn btn-info btn-circle"><i class="fa fa-road"></i></button>
                               <button ng_click="show_bao_duong(x)" title="Thông tin bảo dưỡng" type="button" class="btn btn-info btn-circle"><i class="fa fa-wrench"></i></button>
                           </td>
                           <td style="text-align: center" >
                               <button  ng_click="showDetailXe(x)"  title="chi tiết" type="button" class="btn btn-info btn-circle"><i class="fa fa-list"></i></button>
                           </td>

                       </tr>
                   </table>
                </div>
                <!-- /.table-responsive -->

            </div>
            <!-- /.panel-body -->
        </div>
        <!-- /.panel -->
    </div>
    <!-- /.col-lg-12 -->
     <!-- ============================================= model : chi tiết ======================= -->
    <div class="modal fade" id="chi_tiet" role="dialog">
        <div class="modal-dialog" style="width:97% !Important">

            <div class="modal-content" style="background: snow">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" >&times;</button>
                    <h4 class="modal-title" style="text-transform: uppercase;">Biển kiểm soát: {{currentXe.bien_so}}</h4>
                </div>
                <div class="modal-body" id="" style="overflow-x:auto">
                    <div class="form-group col-md-3">
                      <label for="" class="">Chủ xe : <span>{{currentXe.chu_xe}}</span></label><br>
                      <label for="" class="">Số khung : <span>{{currentXe.so_khung}}</span></label><br>
                      <label for="" class="">Năm sản xuất : <span>{{currentXe.nam_sx}}</span></label><br>
                      <label for="" class="">Ngày cấp phù hiệu : <span>{{currentXe.ngay_cap_phu_hieu | date :  "dd-MM-y"}}</span></label><br>
                      <label for="" class="">Ngày đăng ký GSHT : <span>{{currentXe.ngay_dk_gsht | date :  "dd-MM-y"}}</span></label><br>
                    </div>
                    <div class="form-group col-md-3">
                      <label for="" class="">Tài xế : <span>{{currentXe.tai_xe}}</span></label><br>
                      <label for="" class="">Số máy : <span>{{currentXe.so_may}}</span></label><br>
                      <label for="" class="">Nước sản xuất : <span>{{currentXe.nuoc_sx}}</span></label>
                      <label for="" class="">Ngày hết hạn phù hiệu : <span>{{currentXe.ngay_het_phu_hieu | date :  "dd-MM-y"}}</span></label><br>
                      <label for="" class="">Ngày hết hạn GSHT : <span>{{currentXe.ngay_het_gsht | date :  "dd-MM-y"}}</span></label><br>

                    </div>
                    <div class="form-group col-md-3">
                      <label for="" class="">Hiệu xe : <span>{{currentXe.hieu_xe}}</span></label><br>
                      <label for="" class="">Thiết bị giám sát : <span>{{currentXe.thiet_bi_gsht}}</span></label><br>
                      <label for="" class="">Ngày đăng kiểm : <span>{{currentXe.ngay_dang_kiem | date :  "dd-MM-y"}}</span></label><br>
                       <label for="" class="">Ngày cấp BHDS : <span>{{currentXe.ngay_cap_bh_dan_su | date :  "dd-MM-y"}}</span></label><br>

                    </div> 
                    <div class="form-group col-md-3">
                      <label for="" class="">Loại xe : <span>{{currentXe.loai_xe}}</span></label><br>
                      <label for="" class="">Trọng tải : <span>{{currentXe.trong_tai}}</span></label><br>
                      <label for="" class="">Ngày hết hạn đăng kiểm : <span>{{currentXe.ngay_het_dk | date :  "dd-MM-y"}}</span></label><br>
                      <label for="" class="">Ngày hết hạn BHDS : <span>{{currentXe.ngay_het_bh_dan_su | date :  "dd-MM-y"}}</span></label><br>
                    </div>
                    <div class="row" ng-repeat="km in currentXe.km_hanh_trinh">
                      <div class="col-md-12" style="border-top: 1px dashed;padding-top: 20px;">
                        <label for="">Kilomet hành trình: {{km.month}} - {{km.year}}</label>
                      </div>
                      <div class="col-md-2" ng-repeat="ngay in km.info">
                        <span ng-if="ngay.km > 0">Ngày {{ngay.date}}: <label>{{ngay.km}} Km</label></span>
                        <span ng-if="ngay.km == ''">Ngày {{ngay.date}}: <label>...</label></span>
                      </div>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" id="saveEditInfo" class="btn btn-primary" ng_click="update_bao_duong()">Lưu</button>
                    <button type="button" class="btn btn-primary" data-dismiss="modal">Thoát</button>
                </div>
            </div>

        </div>
    </div>
    <!--============================================= model: bảo dưỡng ========================= -->
    <div class="modal fade" id="bao_duong" role="dialog">
        <div class="modal-dialog" style="width:97% !Important">

            <!-- Modal content-->
            <div class="modal-content" style="background: snow">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" >&times;</button>
                    <h4 class="modal-title" style="text-transform: uppercase;">THÔNG TIN BẢO dưỡng năm {{year}} - Biển kiểm soát: {{currentXe}}</h4>
                </div>
                <div class="modal-body" id="" style="overflow-x:auto">
                    <table class="table table-striped table-bordered table-hover">
                      <tr>
                        <th colspan="13">THÁNG</th>
                      </tr>
                      <tr>
                           <th style="width:15% !Important"></th>
                           <th>1</th>
                           <th>2</th>
                           <th>3</th>
                           <th>4</th>
                           <th>5</th>
                           <th>6</th>
                           <th>7</th>
                           <th>8</th>
                           <th>9</th>
                           <th>10</th>
                           <th>11</th>
                           <th>12</th>
                       </tr>
                       <tr>
                          <th>Km xe chạy trong tháng</th>
                          <td><p id="km-1">{{km[1]}}</p></td>
                          <td><p id="km-2">{{km[2]}}</p></td>
                          <td><p id="km-3">{{km[3]}}</p></td>
                          <td><p id="km-4">{{km[4]}}</p></td>
                          <td><p id="km-5">{{km[5]}}</p></td>
                          <td><p id="km-6">{{km[6]}}</p></td>
                          <td><p id="km-7">{{km[7]}}</p></td>
                          <td><p id="km-8">{{km[8]}}</p></td>
                          <td><p id="km-9">{{km[9]}}</p></td>
                          <td><p id="km-10">{{km[10]}}</p></td>
                          <td><p id="km-11">{{km[11]}}</p></td>
                          <td><p id="km-12">{{km[12]}}</p></td>
                       </tr>
                        <tr>
                         <th>Km xe chạy lũy kế</th>
                          <td><input type="text" class="form-control"  id="kmlk-1"  only-digits ng-model="kmlk[1]"></td>
                          <td><input type="text" class="form-control"  id="kmlk-2"  only-digits ng-model="kmlk[2]"></td>
                          <td><input type="text" class="form-control"  id="kmlk-3"  only-digits ng-model="kmlk[3]"></td>
                          <td><input type="text" class="form-control"  id="kmlk-4"  only-digits ng-model="kmlk[4]"</td>
                          <td><input type="text" class="form-control"  id="kmlk-5"  only-digits ng-model="kmlk[5]"></td>
                          <td><input type="text" class="form-control"  id="kmlk-6"  only-digits ng-model="kmlk[6]"></td>
                          <td><input type="text" class="form-control"  id="kmlk-7"  only-digits ng-model="kmlk[7]"></td>
                          <td><input type="text" class="form-control"  id="kmlk-8"  only-digits ng-model="kmlk[8]"></td>
                          <td><input type="text" class="form-control"  id="kmlk-9"  only-digits ng-model="kmlk[9]"></td>
                          <td><input type="text" class="form-control"  id="kmlk-10"  only-digits ng-model="kmlk[10]"></td>
                          <td><input type="text" class="form-control"  id="kmlk-11"  only-digits ng-model="kmlk[11]"></td>
                          <td><input type="text" class="form-control"  id="kmlk-12"  only-digits ng-model="kmlk[12]"></td>
                       </tr>
                       <tr>
                          <th>Số chuyến trong tháng</th>
                          <td><input type="text" class="form-control" id="sctt-1"  only-digits ng-model="sctt[1]"></td>
                          <td><input type="text" class="form-control" id="sctt-2"  only-digits ng-model="sctt[2]"></td>
                          <td><input type="text" class="form-control" id="sctt-3"  only-digits ng-model="sctt[3]"></td>
                          <td><input type="text" class="form-control" id="sctt-4"  only-digits ng-model="sctt[4]"></td>
                          <td><input type="text" class="form-control" id="sctt-5"  only-digits ng-model="sctt[5]"></td>
                          <td><input type="text" class="form-control" id="sctt-6"  only-digits ng-model="sctt[6]"></td>
                          <td><input type="text" class="form-control" id="sctt-7"  only-digits ng-model="sctt[7]"></td>
                          <td><input type="text" class="form-control" id="sctt-8"  only-digits ng-model="sctt[8]"></td>
                          <td><input type="text" class="form-control" id="sctt-9"  only-digits ng-model="sctt[9]"></td>
                          <td><input type="text" class="form-control" id="sctt-10"  only-digits ng-model="sctt[10]"></td>
                          <td><input type="text" class="form-control" id="sctt-11"  only-digits ng-model="sctt[11]"></td>
                          <td><input type="text" class="form-control" id="sctt-12"  only-digits ng-model="sctt[12]"></td>

                       </tr>
                        <tr>
                          <th>Số chuyến lũy kế</th>
                          <td><input type="text" class="form-control" id="sclk-1"  only-digits ng-model="sclk[1]"></td>
                          <td><input type="text" class="form-control" id="sclk-2"  only-digits ng-model="sclk[2]"></td>
                          <td><input type="text" class="form-control" id="sclk-3"  only-digits ng-model="sclk[3]"></td>
                          <td><input type="text" class="form-control" id="sclk-4"  only-digits ng-model="sclk[4]"></td>
                          <td><input type="text" class="form-control" id="sclk-5"  only-digits ng-model="sclk[5]"></td>
                          <td><input type="text" class="form-control" id="sclk-6"  only-digits ng-model="sclk[6]"></td>
                          <td><input type="text" class="form-control" id="sclk-7"  only-digits ng-model="sclk[7]"></td>
                          <td><input type="text" class="form-control" id="sclk-8"  only-digits ng-model="sclk[8]"></td>
                          <td><input type="text" class="form-control" id="sclk-9"  only-digits ng-model="sclk[9]"></td>
                          <td><input type="text" class="form-control" id="sclk-10"  only-digits ng-model="sclk[10]"></td>
                          <td><input type="text" class="form-control" id="sclk-11"  only-digits ng-model="sclk[11]"></td>
                          <td><input type="text" class="form-control" id="sclk-12"  only-digits ng-model="sclk[12]"></td>

                       </tr>
                       <tr>
                          <th>Nội dung bảo dưỡng</th>
                          <td><textarea class="form-control textarea-bd" id="ndbd-1" ng-model="ndbd[1]"></textarea></td>
                          <td><textarea class="form-control textarea-bd" id="ndbd-2" ng-model="ndbd[2]"></textarea></td>
                          <td><textarea class="form-control textarea-bd" id="ndbd-3" ng-model="ndbd[3]"></textarea></td>
                          <td><textarea class="form-control textarea-bd" id="ndbd-4" ng-model="ndbd[4]"></textarea></td>
                          <td><textarea class="form-control textarea-bd" id="ndbd-5" ng-model="ndbd[5]"></textarea></td>
                          <td><textarea class="form-control textarea-bd" id="ndbd-6" ng-model="ndbd[6]"></textarea></td>
                          <td><textarea class="form-control textarea-bd" id="ndbd-7" ng-model="ndbd[7]"></textarea></td>
                          <td><textarea class="form-control textarea-bd" id="ndbd-8" ng-model="ndbd[8]"></textarea></td>
                          <td><textarea class="form-control textarea-bd" id="ndbd-9" ng-model="ndbd[9]"></textarea></td>
                          <td><textarea class="form-control textarea-bd" id="ndbd-10" ng-model="ndbd[10]"></textarea></td>
                          <td><textarea class="form-control textarea-bd" id="ndbd-11" ng-model="ndbd[11]"></textarea></td>
                          <td><textarea class="form-control textarea-bd" id="ndbd-12" ng-model="ndbd[12]"></textarea></td>
                          
                       </tr>
                       <tr>
                          <th>Thời gian BDSC thực tế</th>
                          <td><input type="text" class="form-control" id="tgbd-1" ng-model="tgbd[1]"></td>
                          <td><input type="text" class="form-control" id="tgbd-2" ng-model="tgbd[2]"></td>
                          <td><input type="text" class="form-control" id="tgbd-3" ng-model="tgbd[3]"></td>
                          <td><input type="text" class="form-control" id="tgbd-4" ng-model="tgbd[4]"></td>
                          <td><input type="text" class="form-control" id="tgbd-5" ng-model="tgbd[5]"></td>
                          <td><input type="text" class="form-control" id="tgbd-6" ng-model="tgbd[6]"></td>
                          <td><input type="text" class="form-control" id="tgbd-7" ng-model="tgbd[7]"></td>
                          <td><input type="text" class="form-control" id="tgbd-8" ng-model="tgbd[8]"></td>
                          <td><input type="text" class="form-control" id="tgbd-9" ng-model="tgbd[9]"></td>
                          <td><input type="text" class="form-control" id="tgbd-10" ng-model="tgbd[10]"></td>
                          <td><input type="text" class="form-control" id="tgbd-11" ng-model="tgbd[11]"></td>
                          <td><input type="text" class="form-control" id="tgbd-12" ng-model="tgbd[12]"></td>

                       </tr>
                       <tr>
                          <th>Địa điểm BDSC cải tạo</th>
                          <td><input type="text" class="form-control" id="ddbd-1" ng-model="ddbd[1]"></td>
                          <td><input type="text" class="form-control" id="ddbd-2" ng-model="ddbd[2]"></td>
                          <td><input type="text" class="form-control" id="ddbd-3" ng-model="ddbd[3]"></td>
                          <td><input type="text" class="form-control" id="ddbd-4" ng-model="ddbd[4]"></td>
                          <td><input type="text" class="form-control" id="ddbd-5" ng-model="ddbd[5]"></td>
                          <td><input type="text" class="form-control" id="ddbd-6" ng-model="ddbd[6]"></td>
                          <td><input type="text" class="form-control" id="ddbd-7" ng-model="ddbd[7]"></td>
                          <td><input type="text" class="form-control" id="ddbd-8" ng-model="ddbd[8]"></td>
                          <td><input type="text" class="form-control" id="ddbd-9" ng-model="ddbd[9]"></td>
                          <td><input type="text" class="form-control" id="ddbd-10" ng-model="ddbd[10]"></td>
                          <td><input type="text" class="form-control" id="ddbd-11" ng-model="ddbd[11]"></td>
                          <td><input type="text" class="form-control" id="ddbd-12" ng-model="ddbd[12]"></td>

                       </tr>

                    </table>
                </div>
                <div class="modal-footer">
                    <button type="button" id="saveEditInfo" class="btn btn-primary" ng_click="update_bao_duong()">Lưu</button>
                    <button type="button" class="btn btn-primary" data-dismiss="modal">Thoát</button>
                </div>
            </div>

        </div>
    </div>

    <!--============================================= model: km hanh trinh =========================-->
    <div class="modal fade" id="km_hanh_trinh" role="dialog">
        <div class="modal-dialog">

            <!-- Modal content-->
            <div class="modal-content" style="background: snow">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" >&times;</button>
                    <h4 class="modal-title">Km hành trình năm {{year}} - Biển kiểm soát: {{currentXe}}</h4>
                </div>
                <div class="modal-body row" id="km_content">
                    
                </div>
                <div class="modal-footer">
                    <button type="button" id="saveEditInfo" class="btn btn-primary" ng_click="update_km_hanh_trinh()">Lưu</button>
                    <button type="button" class="btn btn-primary" data-dismiss="modal">Thoát</button>
                </div>
            </div>

        </div>
    </div>
    
<style>
    .modal-dialog {
        width: 800px !important;
    }
    
    table,.td2{
        border-right: none !important;
    }
    #modal-tran tr{
        background: #f9f9f9 !important;
    }
    #tlb-field{
        margin-bottom: 10px;
    }
    #bao_duong table tr th{
        text-align: center;
    }
    .textarea-bd{
      max-width: 100%;
      min-width: 100%;
      font-size: 10px
    }

</style>
<script>
    

</script>




